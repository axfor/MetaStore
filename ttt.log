[0;36mRunning all tests...[0m
[0;33mTesting internal packages...[0m
=== RUN   TestEncodeBatch_SingleProposal
--- PASS: TestEncodeBatch_SingleProposal (0.00s)
=== RUN   TestEncodeBatch_MultipleProposals
--- PASS: TestEncodeBatch_MultipleProposals (0.00s)
=== RUN   TestEncodeBatch_EmptyProposals
--- PASS: TestEncodeBatch_EmptyProposals (0.00s)
=== RUN   TestDecodeBatch_SingleProposal
--- PASS: TestDecodeBatch_SingleProposal (0.00s)
=== RUN   TestDecodeBatch_MultipleProposals
--- PASS: TestDecodeBatch_MultipleProposals (0.00s)
=== RUN   TestDecodeBatch_InvalidJSON
--- PASS: TestDecodeBatch_InvalidJSON (0.00s)
=== RUN   TestIsBatchProposal
=== RUN   TestIsBatchProposal/single_proposal
=== RUN   TestIsBatchProposal/batch_proposal
=== RUN   TestIsBatchProposal/invalid_json
=== RUN   TestIsBatchProposal/batch_false
--- PASS: TestIsBatchProposal (0.00s)
    --- PASS: TestIsBatchProposal/single_proposal (0.00s)
    --- PASS: TestIsBatchProposal/batch_proposal (0.00s)
    --- PASS: TestIsBatchProposal/invalid_json (0.00s)
    --- PASS: TestIsBatchProposal/batch_false (0.00s)
=== RUN   TestEncodeDecode_RoundTrip
=== RUN   TestEncodeDecode_RoundTrip/single_proposal
=== RUN   TestEncodeDecode_RoundTrip/two_proposals
=== RUN   TestEncodeDecode_RoundTrip/many_proposals
=== RUN   TestEncodeDecode_RoundTrip/proposals_with_special_characters
--- PASS: TestEncodeDecode_RoundTrip (0.00s)
    --- PASS: TestEncodeDecode_RoundTrip/single_proposal (0.00s)
    --- PASS: TestEncodeDecode_RoundTrip/two_proposals (0.00s)
    --- PASS: TestEncodeDecode_RoundTrip/many_proposals (0.00s)
    --- PASS: TestEncodeDecode_RoundTrip/proposals_with_special_characters (0.00s)
=== RUN   TestEncodeBatch_LargeBatch
--- PASS: TestEncodeBatch_LargeBatch (0.00s)
=== RUN   TestProposalBatcher_Creation
--- PASS: TestProposalBatcher_Creation (0.00s)
=== RUN   TestProposalBatcher_SingleProposal
--- PASS: TestProposalBatcher_SingleProposal (0.00s)
=== RUN   TestProposalBatcher_MultipleProposals
--- PASS: TestProposalBatcher_MultipleProposals (0.00s)
=== RUN   TestProposalBatcher_TimeoutTrigger
--- PASS: TestProposalBatcher_TimeoutTrigger (0.10s)
=== RUN   TestProposalBatcher_Stats
--- PASS: TestProposalBatcher_Stats (0.80s)
=== RUN   TestProposalBatcher_LoadMonitoring
    proposal_batcher_test.go:277: Low load: currentLoad=0.00, batchSize=1, timeout=5ms
    proposal_batcher_test.go:287: High load: currentLoad=0.00, batchSize=1, timeout=5ms
    proposal_batcher_test.go:292: Warning: High load batch size (1) not greater than low load (1)
--- PASS: TestProposalBatcher_LoadMonitoring (0.81s)
=== RUN   TestProposalBatcher_DynamicAdjustment
    proposal_batcher_test.go:334: Iteration 0: load=0.00, batchSize=1, timeout=50ms, buffer=0
    proposal_batcher_test.go:334: Iteration 1: load=0.00, batchSize=1, timeout=50ms, buffer=0
    proposal_batcher_test.go:334: Iteration 2: load=0.00, batchSize=1, timeout=50ms, buffer=0
    proposal_batcher_test.go:334: Iteration 3: load=0.00, batchSize=1, timeout=50ms, buffer=0
    proposal_batcher_test.go:334: Iteration 4: load=0.00, batchSize=1, timeout=50ms, buffer=0
    proposal_batcher_test.go:334: Iteration 5: load=0.00, batchSize=1, timeout=50ms, buffer=0
    proposal_batcher_test.go:334: Iteration 6: load=0.00, batchSize=1, timeout=50ms, buffer=0
    proposal_batcher_test.go:334: Iteration 7: load=0.00, batchSize=1, timeout=50ms, buffer=0
    proposal_batcher_test.go:334: Iteration 8: load=0.00, batchSize=1, timeout=50ms, buffer=0
    proposal_batcher_test.go:334: Iteration 9: load=0.00, batchSize=1, timeout=50ms, buffer=0
    proposal_batcher_test.go:344: Total adjustments detected: 0
    proposal_batcher_test.go:348: Warning: Few load adjustments detected (0), dynamic adjustment may not be working
--- PASS: TestProposalBatcher_DynamicAdjustment (3.01s)
=== RUN   TestProposalBatcher_StopGracefully
    proposal_batcher_test.go:383: Batcher stopped gracefully
--- PASS: TestProposalBatcher_StopGracefully (0.20s)
=== RUN   TestProposalBatcher_HighConcurrency
    proposal_batcher_test.go:434: Concurrent test: sent=1000, batched=1000, batches=1000, avgSize=1.00
--- PASS: TestProposalBatcher_HighConcurrency (1.01s)
=== RUN   TestDefaultBatchConfig
--- PASS: TestDefaultBatchConfig (0.00s)
=== RUN   TestInterpolate
=== RUN   TestInterpolate/min_value
=== RUN   TestInterpolate/max_value
=== RUN   TestInterpolate/mid_value
=== RUN   TestInterpolate/threshold_value
--- PASS: TestInterpolate (0.00s)
    --- PASS: TestInterpolate/min_value (0.00s)
    --- PASS: TestInterpolate/max_value (0.00s)
    --- PASS: TestInterpolate/mid_value (0.00s)
    --- PASS: TestInterpolate/threshold_value (0.00s)
PASS
ok  	metaStore/internal/batch	(cached)
=== RUN   TestLeaseProtobufSerialization
--- PASS: TestLeaseProtobufSerialization (0.00s)
=== RUN   TestLeaseGOBBackwardCompatibility
--- PASS: TestLeaseGOBBackwardCompatibility (0.00s)
=== RUN   TestLeaseEmptyKeys
--- PASS: TestLeaseEmptyKeys (0.00s)
=== RUN   TestLeaseNilLease
--- PASS: TestLeaseNilLease (0.00s)
=== RUN   TestLeaseManyKeys
--- PASS: TestLeaseManyKeys (0.00s)
PASS
ok  	metaStore/internal/common	(cached)
?   	metaStore/internal/http	[no test files]
?   	metaStore/internal/kvstore	[no test files]
=== RUN   TestDynamicScaleUp
--- PASS: TestDynamicScaleUp (0.00s)
=== RUN   TestDynamicScaleUp_ReadIndexManager
--- PASS: TestDynamicScaleUp_ReadIndexManager (0.00s)
=== RUN   TestDynamicScaling_StatusTracking
=== RUN   TestDynamicScaling_StatusTracking/Unknown_size
=== RUN   TestDynamicScaling_StatusTracking/Single_node
=== RUN   TestDynamicScaling_StatusTracking/Two_nodes
=== RUN   TestDynamicScaling_StatusTracking/Five_nodes
--- PASS: TestDynamicScaling_StatusTracking (0.00s)
    --- PASS: TestDynamicScaling_StatusTracking/Unknown_size (0.00s)
    --- PASS: TestDynamicScaling_StatusTracking/Single_node (0.00s)
    --- PASS: TestDynamicScaling_StatusTracking/Two_nodes (0.00s)
    --- PASS: TestDynamicScaling_StatusTracking/Five_nodes (0.00s)
=== RUN   TestDynamicScaling_PerformanceOverhead
    dynamic_scaling_test.go:224: Dynamic scaling overhead: 363ns per operation (avg over 1000000 iterations)
--- PASS: TestDynamicScaling_PerformanceOverhead (0.36s)
=== RUN   TestLeaseManager_Creation
--- PASS: TestLeaseManager_Creation (0.00s)
=== RUN   TestLeaseManager_DefaultClockDrift
--- PASS: TestLeaseManager_DefaultClockDrift (0.00s)
=== RUN   TestLeaseManager_BecomeLeader
--- PASS: TestLeaseManager_BecomeLeader (0.00s)
=== RUN   TestLeaseManager_BecomeFollower
--- PASS: TestLeaseManager_BecomeFollower (0.00s)
=== RUN   TestLeaseManager_RenewLease_Success
--- PASS: TestLeaseManager_RenewLease_Success (0.00s)
=== RUN   TestLeaseManager_RenewLease_InsufficientAcks
--- PASS: TestLeaseManager_RenewLease_InsufficientAcks (0.00s)
=== RUN   TestLeaseManager_RenewLease_NotLeader
--- PASS: TestLeaseManager_RenewLease_NotLeader (0.00s)
=== RUN   TestLeaseManager_LeaseExpiration
--- PASS: TestLeaseManager_LeaseExpiration (0.15s)
=== RUN   TestLeaseManager_MultipleRenewals
--- PASS: TestLeaseManager_MultipleRenewals (0.25s)
=== RUN   TestLeaseManager_LeaseRemaining
--- PASS: TestLeaseManager_LeaseRemaining (0.00s)
=== RUN   TestLeaseManager_Stats
--- PASS: TestLeaseManager_Stats (0.15s)
=== RUN   TestMinDuration
=== RUN   TestMinDuration/a_<_b
=== RUN   TestMinDuration/a_>_b
=== RUN   TestMinDuration/a_==_b
--- PASS: TestMinDuration (0.00s)
    --- PASS: TestMinDuration/a_<_b (0.00s)
    --- PASS: TestMinDuration/a_>_b (0.00s)
    --- PASS: TestMinDuration/a_==_b (0.00s)
=== RUN   TestReadIndexManager_Creation
--- PASS: TestReadIndexManager_Creation (0.00s)
=== RUN   TestReadIndexManager_ImmediateRead
--- PASS: TestReadIndexManager_ImmediateRead (0.00s)
=== RUN   TestReadIndexManager_WaitForApply
--- PASS: TestReadIndexManager_WaitForApply (0.05s)
=== RUN   TestReadIndexManager_MultiplePendingReads
--- PASS: TestReadIndexManager_MultiplePendingReads (0.10s)
=== RUN   TestReadIndexManager_PartialNotify
--- PASS: TestReadIndexManager_PartialNotify (0.10s)
=== RUN   TestReadIndexManager_Timeout
--- PASS: TestReadIndexManager_Timeout (0.10s)
=== RUN   TestReadIndexManager_RecordFastPath
--- PASS: TestReadIndexManager_RecordFastPath (0.00s)
=== RUN   TestReadIndexManager_RecordForwarded
--- PASS: TestReadIndexManager_RecordForwarded (0.00s)
=== RUN   TestReadIndexManager_Stats
--- PASS: TestReadIndexManager_Stats (0.05s)
=== RUN   TestReadIndexManager_MixedWorkload
    readindex_manager_test.go:486: Final stats: Total=30, Fast=50, Slow=30, Forwarded=20, Rate=0.62
--- PASS: TestReadIndexManager_MixedWorkload (0.10s)
=== RUN   TestGenerateRequestID
--- PASS: TestGenerateRequestID (0.00s)
=== RUN   TestSingleNodeLeaseRenewal_Debug
    single_node_debug_test.go:37: === ÊµãËØïÂú∫ÊôØ 1: totalNodes=0, receivedAcks=0 ===
    single_node_debug_test.go:39: Result: true (expected: false, majority=1, 0 < 1)
    single_node_debug_test.go:41: 
        === ÊµãËØïÂú∫ÊôØ 2: totalNodes=1, receivedAcks=0 ===
    single_node_debug_test.go:43: Result: true (expected: false, majority=1, 0 < 1)
    single_node_debug_test.go:45: 
        === ÊµãËØïÂú∫ÊôØ 3: totalNodes=1, receivedAcks=1 ===
    single_node_debug_test.go:47: Result: true (expected: true, majority=1, 1 >= 1)
    single_node_debug_test.go:48: HasValidLease: true
    single_node_debug_test.go:50: Stats: RenewCount=3, ExpireCount=0, HasValidLease=true
--- PASS: TestSingleNodeLeaseRenewal_Debug (0.00s)
=== RUN   TestSingleNodeWithSmartConfig
    single_node_debug_test.go:69: === Êñ∞ÂÆûÁé∞ÔºöSmartConfig ÂêØÁî®ÂçïËäÇÁÇπÔºàetcd ÂÖºÂÆπÔºâ===
    single_node_debug_test.go:73: SmartConfig.IsEnabled(): true (expected: true, following etcd)
    single_node_debug_test.go:78: 
        Â∞ùËØïÁª≠ÊúüÔºötotalNodes=1, receivedAcks=1
    single_node_debug_test.go:80: Result: true (expected: true, etcd-compatible single-node support)
--- PASS: TestSingleNodeWithSmartConfig (0.00s)
=== RUN   TestSingleNodeWithoutSmartConfig
    single_node_debug_test.go:98: === ‰∏ç‰ΩøÁî® SmartConfig (nil) ===
    single_node_debug_test.go:102: 
        Â∞ùËØïÁª≠ÊúüÔºötotalNodes=1, receivedAcks=1
    single_node_debug_test.go:104: Result: true (expected: true)
    single_node_debug_test.go:105: HasValidLease: true
    single_node_debug_test.go:117: 
        Á¨¨‰∫åÊ¨°Áª≠Êúü Result: true
    single_node_debug_test.go:123: 
        Final Stats: RenewCount=2, HasValidLease=true, Remaining=199.952ms
--- PASS: TestSingleNodeWithoutSmartConfig (0.05s)
=== RUN   TestMajorityCalculation
    single_node_debug_test.go:151: totalNodes=0 ‚Üí majority=1 ‚úì
    single_node_debug_test.go:151: totalNodes=1 ‚Üí majority=1 ‚úì
    single_node_debug_test.go:151: totalNodes=2 ‚Üí majority=2 ‚úì
    single_node_debug_test.go:151: totalNodes=3 ‚Üí majority=2 ‚úì
    single_node_debug_test.go:151: totalNodes=4 ‚Üí majority=3 ‚úì
    single_node_debug_test.go:151: totalNodes=5 ‚Üí majority=3 ‚úì
--- PASS: TestMajorityCalculation (0.00s)
=== RUN   TestSmartLeaseConfig_SingleNode
--- PASS: TestSmartLeaseConfig_SingleNode (0.00s)
=== RUN   TestSmartLeaseConfig_MultiNode
--- PASS: TestSmartLeaseConfig_MultiNode (0.00s)
=== RUN   TestSmartLeaseConfig_UserDisabled
--- PASS: TestSmartLeaseConfig_UserDisabled (0.00s)
=== RUN   TestSmartLeaseConfig_DynamicChange
--- PASS: TestSmartLeaseConfig_DynamicChange (0.00s)
=== RUN   TestSmartLeaseConfig_UnknownSize
--- PASS: TestSmartLeaseConfig_UnknownSize (0.00s)
=== RUN   TestSmartLeaseConfig_UserToggle
--- PASS: TestSmartLeaseConfig_UserToggle (0.00s)
=== RUN   TestDetectClusterSizeFromPeers
=== RUN   TestDetectClusterSizeFromPeers/Single_node
=== RUN   TestDetectClusterSizeFromPeers/Three_nodes
=== RUN   TestDetectClusterSizeFromPeers/Empty
--- PASS: TestDetectClusterSizeFromPeers (0.00s)
    --- PASS: TestDetectClusterSizeFromPeers/Single_node (0.00s)
    --- PASS: TestDetectClusterSizeFromPeers/Three_nodes (0.00s)
    --- PASS: TestDetectClusterSizeFromPeers/Empty (0.00s)
=== RUN   TestSmartLeaseConfig_AutoDetection
--- PASS: TestSmartLeaseConfig_AutoDetection (0.30s)
PASS
ok  	metaStore/internal/lease	(cached)
=== RUN   TestBatchApplyPut
--- PASS: TestBatchApplyPut (0.00s)
=== RUN   TestBatchApplyDelete
--- PASS: TestBatchApplyDelete (0.00s)
=== RUN   TestBatchApplyMixed
--- PASS: TestBatchApplyMixed (0.00s)
=== RUN   TestBatchApplyCorrectnessVsSingle
--- PASS: TestBatchApplyCorrectnessVsSingle (0.00s)
=== RUN   TestBatchApplyEmptyOps
--- PASS: TestBatchApplyEmptyOps (0.00s)
=== RUN   TestBatchApplySingleOp
--- PASS: TestBatchApplySingleOp (0.00s)
=== RUN   TestBatchApplyStressTest
    batch_apply_test.go:377: Applied 10000 operations in 29.006546ms
    batch_apply_test.go:378: Throughput: 344749.77 ops/sec
--- PASS: TestBatchApplyStressTest (0.08s)
=== RUN   TestSnapshotProtobufSerialization
--- PASS: TestSnapshotProtobufSerialization (0.00s)
=== RUN   TestSnapshotJSONBackwardCompatibility
--- PASS: TestSnapshotJSONBackwardCompatibility (0.00s)
=== RUN   TestSnapshotEmptyData
    snapshot_converter_test.go:230: Serialized empty snapshot: len=8, data="SNAP-PB:"
--- PASS: TestSnapshotEmptyData (0.00s)
=== RUN   TestPutDirectConcurrent
--- PASS: TestPutDirectConcurrent (0.01s)
=== RUN   TestPutDirectSameKeyConcurrent
    store_direct_test.go:135: Concurrent writes: revision=100, version=8 (race window expected)
--- PASS: TestPutDirectSameKeyConcurrent (0.00s)
=== RUN   TestDeleteDirectConcurrent
--- PASS: TestDeleteDirectConcurrent (0.00s)
=== RUN   TestApplyTxnWithShardLocks
--- PASS: TestApplyTxnWithShardLocks (0.00s)
=== RUN   TestConcurrentTransactions
    store_direct_test.go:294: Successful transactions: 18 / 100
--- PASS: TestConcurrentTransactions (0.00s)
=== RUN   TestLeaseOperationsConcurrent
--- PASS: TestLeaseOperationsConcurrent (0.00s)
=== RUN   TestRaceConditions
    store_direct_test.go:495: Completed 49421222 operations in 5s
    store_direct_test.go:496: Throughput: 9884244.40 ops/sec
--- PASS: TestRaceConditions (5.00s)
PASS
ok  	metaStore/internal/memory	(cached)
?   	metaStore/internal/proto	[no test files]
=== RUN   TestProcessMessages
=== RUN   TestProcessMessages/only_one_snapshot_message
=== RUN   TestProcessMessages/one_snapshot_message_and_one_other_message
--- PASS: TestProcessMessages (0.00s)
    --- PASS: TestProcessMessages/only_one_snapshot_message (0.00s)
    --- PASS: TestProcessMessages/one_snapshot_message_and_one_other_message (0.00s)
PASS
ok  	metaStore/internal/raft	(cached)
=== RUN   TestRocksDB_Compact_Basic
2025-11-03T22:22:11.921+0800	[34mINFO[0m	log/logger.go:286	Starting compact operation	{"targetRevision": 50, "currentRevision": 100, "lastCompacted": 0, "component": "storage-rocksdb"}
2025-11-03T22:22:12.007+0800	[34mINFO[0m	log/logger.go:286	Compact operation completed	{"revision": 50, "duration": "85.550417ms", "cleanedLeases": 0, "component": "storage-rocksdb"}
--- PASS: TestRocksDB_Compact_Basic (0.41s)
=== RUN   TestRocksDB_Compact_Validation
2025-11-03T22:22:12.227+0800	[34mINFO[0m	log/logger.go:286	Starting compact operation	{"targetRevision": 40, "currentRevision": 50, "lastCompacted": 0, "component": "storage-rocksdb"}
2025-11-03T22:22:12.309+0800	[34mINFO[0m	log/logger.go:286	Compact operation completed	{"revision": 40, "duration": "82.328227ms", "cleanedLeases": 0, "component": "storage-rocksdb"}
--- PASS: TestRocksDB_Compact_Validation (0.30s)
=== RUN   TestRocksDB_Compact_ExpiredLeases
2025-11-03T22:22:12.529+0800	[34mINFO[0m	log/logger.go:286	Starting compact operation	{"targetRevision": 40, "currentRevision": 50, "lastCompacted": 0, "component": "storage-rocksdb"}
2025-11-03T22:22:12.615+0800	[34mINFO[0m	log/logger.go:286	Compact operation completed	{"revision": 40, "duration": "85.460156ms", "cleanedLeases": 1, "component": "storage-rocksdb"}
--- PASS: TestRocksDB_Compact_ExpiredLeases (0.31s)
=== RUN   TestRocksDB_Compact_PhysicalCompaction
2025-11-03T22:22:12.885+0800	[34mINFO[0m	log/logger.go:286	Starting compact operation	{"targetRevision": 1400, "currentRevision": 1500, "lastCompacted": 0, "component": "storage-rocksdb"}
2025-11-03T22:22:12.970+0800	[34mINFO[0m	log/logger.go:286	Compact operation completed	{"revision": 1400, "duration": "84.682863ms", "cleanedLeases": 0, "component": "storage-rocksdb"}
--- PASS: TestRocksDB_Compact_PhysicalCompaction (0.35s)
=== RUN   TestRocksDB_Compact_Sequential
2025-11-03T22:22:13.195+0800	[34mINFO[0m	log/logger.go:286	Starting compact operation	{"targetRevision": 50, "currentRevision": 200, "lastCompacted": 0, "component": "storage-rocksdb"}
2025-11-03T22:22:13.281+0800	[34mINFO[0m	log/logger.go:286	Compact operation completed	{"revision": 50, "duration": "85.882287ms", "cleanedLeases": 0, "component": "storage-rocksdb"}
2025-11-03T22:22:13.281+0800	[34mINFO[0m	log/logger.go:286	Starting compact operation	{"targetRevision": 100, "currentRevision": 200, "lastCompacted": 50, "component": "storage-rocksdb"}
2025-11-03T22:22:13.281+0800	[34mINFO[0m	log/logger.go:286	Compact operation completed	{"revision": 100, "duration": "166.693¬µs", "cleanedLeases": 0, "component": "storage-rocksdb"}
2025-11-03T22:22:13.281+0800	[34mINFO[0m	log/logger.go:286	Starting compact operation	{"targetRevision": 150, "currentRevision": 200, "lastCompacted": 100, "component": "storage-rocksdb"}
2025-11-03T22:22:13.281+0800	[34mINFO[0m	log/logger.go:286	Compact operation completed	{"revision": 150, "duration": "55.855¬µs", "cleanedLeases": 0, "component": "storage-rocksdb"}
--- PASS: TestRocksDB_Compact_Sequential (0.31s)
=== RUN   TestRocksDBStorage_BasicOperations
--- PASS: TestRocksDBStorage_BasicOperations (0.27s)
=== RUN   TestRocksDBStorage_AppendEntries
--- PASS: TestRocksDBStorage_AppendEntries (0.29s)
=== RUN   TestRocksDBStorage_Term
--- PASS: TestRocksDBStorage_Term (0.28s)
=== RUN   TestRocksDBStorage_HardState
--- PASS: TestRocksDBStorage_HardState (0.27s)
=== RUN   TestRocksDBStorage_Snapshot
--- PASS: TestRocksDBStorage_Snapshot (0.31s)
=== RUN   TestRocksDBStorage_ApplySnapshot
2025-11-03T22:22:15.010+0800	[34mINFO[0m	log/logger.go:286	Applied Raft snapshot	{"snapshotIndex": 3, "newFirstIndex": 4, "component": "raft-storage"}
--- PASS: TestRocksDBStorage_ApplySnapshot (0.29s)
=== RUN   TestRocksDBStorage_Compact
2025-11-03T22:22:15.299+0800	[34mINFO[0m	log/logger.go:286	Compacted Raft log	{"compactIndex": 3, "component": "raft-storage"}
--- PASS: TestRocksDBStorage_Compact (0.29s)
=== RUN   TestRocksDBStorage_Persistence
--- PASS: TestRocksDBStorage_Persistence (0.42s)
PASS
ok  	metaStore/internal/rocksdb	(cached)
[0;33mTesting integration and system tests...[0m
=== RUN   TestBatchProposal_LowLoad
    batch_proposal_performance_test.go:35: === Testing Batch Proposal: Low Load Scenario ===
    batch_proposal_performance_test.go:38: 
        --- Test 1: Batch Enabled ---
{"level":"info","msg":"replaying WAL","member_id":1,"component":"raft-memory"}
{"level":"info","msg":"loading WAL","term":54,"index":500296,"component":"raft-memory"}
raft2025/11/03 22:33:11 INFO: 1 switched to configuration voters=(1)
raft2025/11/03 22:33:11 INFO: 1 became follower at term 54
raft2025/11/03 22:33:11 INFO: newRaft 1 [peers: [1], term: 54, commit: 507497, applied: 500296, lastindex: 507505, lastterm: 54]
{"level":"info","msg":"batch proposal system enabled","min_batch_size":1,"max_batch_size":256,"min_timeout":"5ms","max_timeout":"20ms","load_threshold":0.7,"component":"raft-memory"}
{"level":"info","msg":"Lease Read smart config updated","old_cluster_size":0,"new_cluster_size":1,"old_enabled":false,"new_enabled":true,"user_enabled":true,"reason":"Single-node cluster detected, enabled with special handling (following etcd behavior)"}
{"level":"info","msg":"lease read system enabled with smart scaling","election_timeout":"1s","heartbeat_interval":"100ms","clock_drift":"100ms","read_timeout":"5s","initial_cluster_size":1,"currently_enabled":true,"component":"raft-memory"}
{"level":"info","msg":"Lease Read auto-detection started","initial_cluster_size":1,"check_interval":"1m0s"}
2025-11-03T22:33:11.763+0800	[34mINFO[0m	log/logger.go:286	Loading memory snapshot	{"term": 54, "index": 500296, "component": "storage-memory"}
2025-11-03T22:33:12.462+0800	[34mINFO[0m	log/logger.go:286	Starting etcd-compatible gRPC server	{"address": "127.0.0.1:53378", "component": "server"}
2025-11-03T22:33:12.462+0800	[34mINFO[0m	log/logger.go:286	Server started with reliability features enabled	{"max_connections": 1000, "max_requests": 5000, "max_memory_mb": 8192, "graceful_shutdown": true, "panic_recovery": true, "health_check": true, "crc_validation": true, "component": "server"}
2025-11-03T22:33:12.462+0800	[34mINFO[0m	log/logger.go:286	Lease expiry checker started	{"check_interval": "1s", "component": "lease-manager"}
    batch_proposal_performance_test.go:379: Starting test 'low-load-batch': 5 clients √ó 200 ops = 1000 total ops
raft2025/11/03 22:33:13 INFO: 1 is starting a new election at term 54
raft2025/11/03 22:33:13 INFO: 1 became pre-candidate at term 54
raft2025/11/03 22:33:13 INFO: 1 received MsgPreVoteResp from 1 at term 54
raft2025/11/03 22:33:13 INFO: 1 has received 1 MsgPreVoteResp votes and 0 vote rejections
raft2025/11/03 22:33:13 INFO: 1 became candidate at term 55
raft2025/11/03 22:33:13 INFO: 1 received MsgVoteResp from 1 at term 55
raft2025/11/03 22:33:13 INFO: 1 has received 1 MsgVoteResp votes and 0 vote rejections
raft2025/11/03 22:33:13 INFO: 1 became leader at term 55
raft2025/11/03 22:33:13 INFO: raft.node: 1 elected leader 1 at term 55
{"level":"info","msg":"Node became Leader, lease initialized"}
2025-11-03T22:33:14.177+0800	[34mINFO[0m	log/logger.go:286	Received shutdown signal	{"signal": "interrupt", "component": "shutdown"}
2025-11-03T22:33:14.177+0800	[34mINFO[0m	log/logger.go:286	Shutdown phase started	{"phase": "Stop Accepting", "component": "shutdown"}
2025-11-03T22:33:14.177+0800	[34mINFO[0m	log/logger.go:286	Shutdown phase: Stop accepting new connections	{"phase": "StopAccepting", "component": "server"}
2025-11-03T22:33:14.177+0800	[34mINFO[0m	log/logger.go:286	Shutdown phase started	{"phase": "Drain Connections", "component": "shutdown"}
2025-11-03T22:33:14.177+0800	[34mINFO[0m	log/logger.go:286	Shutdown phase: Drain existing connections	{"phase": "DrainConnections", "component": "server"}
2025-11-03T22:33:16.177+0800	[34mINFO[0m	log/logger.go:286	Shutdown phase started	{"phase": "Persist State", "component": "shutdown"}
2025-11-03T22:33:16.177+0800	[34mINFO[0m	log/logger.go:286	Shutdown phase: Persist state	{"phase": "PersistState", "component": "server"}
2025-11-03T22:33:16.177+0800	[34mINFO[0m	log/logger.go:286	Shutdown phase started	{"phase": "Close Resources", "component": "shutdown"}
2025-11-03T22:33:16.177+0800	[34mINFO[0m	log/logger.go:286	Shutdown phase: Close resources	{"phase": "CloseResources", "component": "server"}
2025-11-03T22:33:16.177+0800	[34mINFO[0m	log/logger.go:286	Lease expiry checker stopped	{"component": "lease-manager"}
2025-11-03T22:33:16.177+0800	[34mINFO[0m	log/logger.go:286	Graceful shutdown completed	{"component": "shutdown"}
