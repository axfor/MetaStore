# Witness Node Configuration Example
# ====================================
# This configuration is for a witness node in a 2-node HA setup.
# Witness nodes participate in Raft voting but don't store data.
#
# Deployment Architecture:
#   Node 1 (Data)    + Node 2 (Data)    + Witness = 3-node cluster
#   Full storage       Full storage       Vote only
#   Quorum = 2/3 (can tolerate 1 node failure)

server:
  cluster_id: 1
  member_id: 3  # Witness is typically the 3rd node

  # ============================================
  # Protocol Configuration
  # ============================================
  # Witness nodes typically don't serve client requests
  # Set empty addresses to disable these services
  etcd:
    address: ""  # Disabled - witness doesn't serve etcd clients

  http:
    address: ""  # Disabled - witness doesn't serve HTTP clients

  mysql:
    address: ""  # Disabled - witness doesn't serve MySQL clients

  # ============================================
  # Raft Configuration
  # ============================================
  raft:
    # Node role: "witness" for lightweight voting-only node
    node_role: "witness"

    # Witness-specific configuration
    witness:
      # Persist vote state to prevent double voting after restart
      persist_vote: true
      # Don't forward client requests (witness has no data)
      forward_requests: false

    # Standard Raft timing (same as data nodes)
    tick_interval: 100ms
    election_tick: 10
    heartbeat_tick: 1

    # Stability features
    pre_vote: true
    check_quorum: true

    # Lease Read is automatically disabled for witness nodes
    # (witness has no data to serve)

  # ============================================
  # Logging Configuration
  # ============================================
  log:
    level: info
    encoding: json
